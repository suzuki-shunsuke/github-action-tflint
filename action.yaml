name: tflint
description: tflint action
inputs:
  github_token:
    description: 'GitHub Access Token'
    required: false
    default: ${{ github.token }}
  github_token_for_tflint_init:
    description: GitHub Access Token for tflint --init. If this input isn't set, github_token is used
    required: false
  github_token_for_fix:
    description: GitHub Access Token for tflint --fix. If this input isn't set, github_token is used
    required: false
  working_directory:
    description: 'Working Directory'
    required: false
    default: ""
  github_comment:
    description: 'Whether a comment is posted with github-comment'
    required: false
    default: 'false'
  fix:
    description: If this is true, tflint --fix is executed
    required: false
    default: 'false'
runs:
  using: composite
  steps:
    - uses: aquaproj/aqua-installer@f13c5d2f0357708d85477aabe50fd3f725528745 # v3.1.0
      with:
        aqua_version: v2.39.0
        skip_install_aqua: "true"
        enable_aqua_install: "false"
    - run: node dist/index.js
      shell: bash
      env:
        GH_TOKEN: ${{ inputs.github_token }}
        GH_TOKEN_FOR_TFLINT_INIT: ${{ inputs.github_token_for_tflint_init }}
        GH_TOKEN_FOR_FIX: ${{ inputs.github_token_for_fix }}
        WORKING_DIR: ${{ inputs.working_directory }}
        IS_GH_COMMENT: ${{ inputs.github_comment }}
        IS_FIX: ${{ inputs.fix }}
